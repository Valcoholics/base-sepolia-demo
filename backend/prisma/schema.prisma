generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AP721 {
  ap721           String         @id
  sender          String
  owner           String
  logic           String
  renderer        String
  factory         String
  createdAt       BigInt
  transactionHash String
  rawTransaction  RawTransaction @relation(fields: [transactionHash], references: [transactionHash])
}

model TokenStorage {
  ap721           String
  pointer         String
  tokenId         BigInt
  transactionHash String
  updatedAt       BigInt
  updatedBy       String
  rawTransaction  RawTransaction @relation(fields: [transactionHash], references: [transactionHash])

  @@id([ap721, tokenId])
}

model RawTransaction {
  transactionHash String         @id
  eventType       String
  createdAt       BigInt
  ap721           AP721[]
  tokenStorage    TokenStorage[]
}

model Arweave {
  tableName String
  link      String   @id
  timestamp DateTime @default(now())
}
